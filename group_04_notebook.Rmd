---
title: "Group 04 Notebook"
output: html_notebook
authors: Hannah Ziegler, Tinashe Chingarande, Andrés Roa
---

###MILESTONE 02###

Chosen paragraph:

“Beyond the mammoth cases, a pileup of other large payouts has padded the tab, a Times analysis of city payouts found. 

While the ##total number of payouts has dipped over time##, 

the ##average amount has increased.##

Last budget year, the city paid out 30 settlements of $1 million or more — five times as many as a decade before.”

--
Individual Data Points to ID:

- Payouts data
--
The Steps:

- Load the data

- Create a dataframe to deal only with the 2017 payouts
- Create a dataframe to deal only with the 2006-2016 payouts
- Find the number of payouts from each year
  - Sum the number (NOT THE TOTAL, ANDRES) of payouts per year
  - Find the percent change from 2006 to 2016
  
- Find average amount
  - Use the <mean> function to find that the average has increased
  
- Find the >= $1 million settlements   
  - Filter the 2017 payouts for settlements over $1 million, see how many there are
  - Filter the 2007 payouts for settlements over $1 million, see how many there are
  

```{r}
# Turn off scientific notation
options(scipen=999)

# Load the tidyverse.
library(tidyverse)

```



```{r}
# Write the code to load the CSV file here

all_payouts_decade <- read_csv('data/clean_10_year_payouts.csv', skip=2, col_names =c("fiscal_year", "case_name", "claim_case_number", "amount", "department", "case_type"))

total_yearly_payouts <- read_csv('data/cleaned_total_yearly_payouts.csv')

```


```{r}
# Write the code to create a dataframe of only the payouts from the year 2017

payouts_2017 <- all_payouts_decade %>%
  filter(fiscal_year == "2017")

```



```{r}
# Write the code to create a dataframe of payouts from 2006-2016 

payouts_2006_2016 <- all_payouts_decade %>%
  filter(fiscal_year < "2017") 

```



```{r}
# Sum the total number of payouts from 2006-2016 (satisfies "five times as many as a decade before")

payouts_2006_2016 %>%
  summarise(
    count=n())

```



```{r}
# Determine the percent change in payouts through the whole 10-year period (satisfies "while the total number of payouts has dipped over time")

yearly_payout_count <- all_payouts_decade %>%
  group_by(fiscal_year) %>%
  summarise(count=n()) %>%
  arrange(fiscal_year)
  
yearly_payout_count %>%
  summarise(
  total_payouts_10_years = sum(count)
)

yearly_payout_count %>%
  summarise(
  percent_change = ((1369-1468)/18703)*100
)

```



```{r}
# Find the average amount of payouts from the decade 2006-2016 (satisfies "the average amount has increased")

payouts_2006_2016 %>%
  summarise(
    mean_payout_amount = mean(amount)
  )
  
```



```{r}
# Filter to find the total number of payouts over $1 million in 2017. (satisfies "Last budget year, the city paid out 30 settlements of $1 million or more")

```



```{r}
# Sum the total number of payouts greater the $1 million from 2006-2016 (satisfies "five times as many as a decade before")

```